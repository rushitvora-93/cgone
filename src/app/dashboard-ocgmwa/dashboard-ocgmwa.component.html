<div class="page-container mwa-body">
  <div class="wrapper mwa-wrapper" [class.sidecollapse]="leftmenu">

    <div class="sidenav" [class.mini]="contractSidebar">
      <div class="sidebar-align">
        <div class="navbar-brand">
          <img src="../../assets/brand-logo.png" alt="One CG" />
        </div>
        <!-- navbar header -->
        <div class="navbar-toggle" (click)="showHidePanelFn()">
          <button mat-button>
            <i class="fas fa-chevron-right" *ngIf="contractSidebar"></i>
            <i class="fas fa-chevron-left" *ngIf="!contractSidebar"></i>
          </button>
        </div>

        <!-- small side bar end-->
        <div class="sidebar-wide">
          <div class="side-profile">
            <img src="assets/img/12.jpg" class="img-fluid rounded-circle" alt="" />
            <span>{{authDetail.Username ? authDetail.Username : 'Admin'}}</span>
          </div>
          <div class="nav-menu-list">
            <!-- sidebar add  environment btn -->
            <mat-accordion class="side-menu-accordian">
              <mat-expansion-panel class="item-expand" *ngIf="config.home" [expanded]="menuExpand === 1"
                (opened)="menuExpand = 1">
                <mat-expansion-panel-header class="sidenavHead">
                  <div class="ocg-menu-item mwa-icon" routerLink="/dashboard/home" [class.active]="
                    activePage==='home'">
                    <div class="icon">
                      <img src="/assets/icons/home-dark.svg" class="def">
                      <img src="/assets/icons/home-light.svg" class="hover">
                    </div>
                    <div class="label">Home</div>
                  </div>
                </mat-expansion-panel-header>
              </mat-expansion-panel>
              <mat-expansion-panel *ngIf="config.oneConnect" class="item-expand" [expanded]="menuExpand === 2"
                (opened)="menuExpand = 2">
                <mat-expansion-panel-header class="sidenavHead">
                  <div class="ocg-menu-item mwa-icon" routerLink="/dashboard"
                    [class.active]="activePage==='oneconnect'">
                    <div class="icon">
                      <img src="/assets/icons/oconnect-dark.svg" class="def">
                      <img src="/assets/icons/oconnect-light.svg" class="hover">
                    </div>
                    <div class="label">One Connect</div>
                  </div>

                </mat-expansion-panel-header>
                <div class="ocg-sub-menu">
                  <div class="item" routerLink="/dashboard/oneconnect/environment/add">
                    <div class="ico"><img src="/assets/icons/oconnect-env.png"></div> Add Environment
                  </div>
                  <div class="item" routerLink="/dashboard/oneconnect/host/add">
                    <div class="ico"><img src="/assets/icons/oconnect-host.png"></div>Add Host
                  </div>
                  <div class="item" routerLink="/dashboard/oneconnect/apps/clone">
                    <div class="ico"><img src="/assets/icons/oconnect-clone.png"></div>Clone Apps
                  </div>
                </div>
                <mat-expansion-panel class="sidenavSubBody">
                  <mat-expansion-panel-header class="sidenavHead">
                    <mat-panel-title>
                      <span class="side-panel-sub-txt">Environment</span>
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  <app-env-details *ngFor="let env of environmentDetails" [env]="env" (onLogOut)="logOut($event)"
                    (onLoad)="loadSelectedEnv($event)" (onRemoveEnvironment)="removeEnvironment($event)"
                    (onPromoteEnvironment)="promoteEnvironment($event)">
                  </app-env-details>
                </mat-expansion-panel>
                <mat-expansion-panel class="sidenavSubBody appmenu">
                  <mat-expansion-panel-header class="sidenavHead">
                    <mat-panel-title>
                      <!-- <i class="fas fa-suitcase clry mr"></i> -->
                      <span class="side-panel-sub-txt">Application</span>
                      <span class="badge bg-primary">{{
										filteredAutomatorApps?.length
									}}</span>
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  <!-- <form class="form-inline mr-auto top-serch w-100 navbar-search"> -->
                  <div class="search-input-group">
                    <input [formControl]="searchApps" type="text" class="form-control border-0 small"
                      placeholder="Search" aria-label="Search" aria-describedby="basic-addon2" />
                    <div class="input-group-append">
                      <button class="btn btn-cls" type="button">
                        <i class="fas fa-search fa-sm"></i>
                      </button>
                    </div>
                  </div>
                  <!-- </form> -->
                  <p *ngFor="let automatorApp of filteredAutomatorApps" class="automator-app">
                    <a href="javascript:void(0)" draggable="true" (drop)="drop($event)"
                      (dragstart)="drag($event, automatorApp)" (dragend)="dragEnd($event)"
                      id="{{ automatorApp.propertyName }}" class="side-panel-sub-txt">
                      {{ automatorApp.mappedName.replace('CFG','') }}
                    </a>
                  </p>
                </mat-expansion-panel>
                <mat-expansion-panel class="sidenavSubBody">
                  <mat-expansion-panel-header class="sidenavHead">
                    <mat-panel-title>
                      <!-- <i class="far fa-folder-open clry mr"></i> -->
                      <span class="side-panel-sub-txt">Servers</span>
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  <mat-checkbox [(ngModel)]="selectedAll" (change)="selectAll()"><strong>Select All</strong>
                  </mat-checkbox>
                  <mat-checkbox *ngFor="let host of filterHosts" [(ngModel)]="host.selected"
                    (change)="checkIfAllSelected(host, $event)" value="{{ host.hostId }}">
                    <span class="side-panel-sub-txt">{{ host.hostName }}</span>
                  </mat-checkbox>
                </mat-expansion-panel>

              </mat-expansion-panel>
              <mat-expansion-panel *ngIf="config.oneChange" class="item-expand" [expanded]="menuExpand === 3"
                (opened)="menuExpand = 3">
                <mat-expansion-panel-header class="sidenavHead">
                  <div class="ocg-menu-item mwa-icon" [class.active]="activePage==='onechange'">
                    <div class="icon">
                      <img src="/assets/icons/ochange-dark.svg" class="def">
                      <img src="/assets/icons/ochange-light.svg" class="hover">
                    </div>
                    <div class="label">One Change</div>
                  </div>
                </mat-expansion-panel-header>
                <div class="ocg-sub-menu">
                  <div class="item" routerLink="/dashboard/onechange/promote">Promote</div>
                  <div class="item" routerLink="/dashboard/onechange/promote/report">Promote Report</div>
                </div>
              </mat-expansion-panel>

              <mat-expansion-panel *ngIf="config.oneTrack" class="item-expand" [expanded]="menuExpand === 4"
                (opened)="menuExpand = 4">
                <mat-expansion-panel-header class="sidenavHead">
                  <div class="ocg-menu-item mwa-icon" [class.active]="activePage==='onetrack'">
                    <div class="icon">
                      <img src="/assets/icons/otrack-dark.svg" class="def">
                      <img src="/assets/icons/otrack-light.svg" class="hover">
                    </div>
                    <div class="label">One Track</div>
                  </div>
                </mat-expansion-panel-header>
                <div class="ocg-sub-menu">
                  <div class="item" routerLink="/dashboard/onetrack/track">Track</div>
                  <div class="item" routerLink="/dashboard/onetrack/permission">Permission</div>
                  <div class="item" routerLink="/dashboard/onetrack/compare">Comparison</div>
                </div>
              </mat-expansion-panel>


              <mat-expansion-panel *ngIf="config.oneDesign" class="item-expand" [expanded]="menuExpand === 5"
                (opened)="menuExpand = 5">
                <mat-expansion-panel-header class="sidenavHead">
                  <div class="ocg-menu-item mwa-icon" [class.active]="activePage==='onedesign'">
                    <div class="icon">
                      <img src="/assets/icons/odesign-dark.svg" class="def">
                      <img src="/assets/icons/odesign-light.svg" class="hover">
                    </div>
                    <div class="label">One Design</div>
                  </div>
                </mat-expansion-panel-header>
                <div class="ocg-sub-menu">
                  <div class="item" routerLink="/dashboard/onedesign/env/virtual">Virtual
                    Environments</div>
                  <div class="item" routerLink="/dashboard/onedesign/env/copy">Copy
                    Environments</div>
                </div>
              </mat-expansion-panel>



              <mat-expansion-panel class="item-expand" *ngIf="config.oneTest" [expanded]="menuExpand === 6"
                (opened)="menuExpand = 6">
                <mat-expansion-panel-header class="sidenavHead">
                  <div class="ocg-menu-item mwa-icon" [class.active]="activePage==='onetest'"
                    routerLink="/dashboard/onetest">
                    <div class="icon">
                      <img src="/assets/icons/otest-dark.svg" class="def">
                      <img src="/assets/icons/otest-light.svg" class="hover">
                    </div>
                    <div class="label">One Test</div>
                  </div>
                </mat-expansion-panel-header>

                <div class="ocg-sub-menu">
                  <div class="item" routerLink="/dashboard/onetest/script">Script</div>
                  <div class="item" routerLink="/dashboard/onetest/service">Service</div>
                </div>

              </mat-expansion-panel>

              <!-- </mat-accordion> -->
              <!-- new menu-->
              <mat-expansion-panel class="item-expand" *ngIf="config.isTelephonyActive">
                <mat-expansion-panel-header class="sidenavHead">
                  <mat-panel-title>
                    <!-- <i class="fas fa-mobile-alt clry mr"></i> -->
                    Telephony
                  </mat-panel-title>
                </mat-expansion-panel-header>
                <p>
                  <a href="javascript:void(0)" title="Places" (click)="ObjectClick($event)">Places</a>
                </p>
                <p>
                  <a href="javascript:void(0)" title="Place Groups" (click)="ObjectClick($event)">PlaceGroups</a>
                </p>
                <!-- <p><a href="javascript:void(0)" title="Link" (click)="ObjectClick($event)">Switches</a></p> -->
                <p (click)="switchClick('switches')">
                  <a href="javascript:void(0)" (click)="isCollapsedSwitch = !isCollapsedSwitch"
                    [attr.aria-expanded]="!isCollapsedSwitch" aria-controls="collapseExampleSwitch">
                    Switches
                    <i *ngIf="isCollapsedSwitch" class="fas colapseic fa-chevron-down swdicon"></i>
                    <i *ngIf="!isCollapsedSwitch" class="fas colapseic fa-chevron-up swdicon"></i>
                  </a>
                </p>
                <div id="collapseExampleSwitch" [ngbCollapse]="isCollapsedSwitch" class="switch-tree">
                  <app-switch *ngFor="let val of switchValue" [switch]="val" (dnClick)="dnClick($event)">
                  </app-switch>
                  <!-- <p>
                  <a href="javascript:void(0)" (click)="isCollapsed1 = !isCollapsed1"
                  [attr.aria-expanded]="!isCollapsed" aria-controls="collapseExample1">
                 {{val.name}}
                    <i *ngIf="isCollapsed1" class="fas colapseic fa-chevron-down swdicon"></i>
                    <i *ngIf="!isCollapsed1" class="fas colapseic fa-chevron-up swdicon"></i>
                  </a>
                </p>
                <div id="collapseExample1" [ngbCollapse]="isCollapsed1" class="switch-tree">
                  <p><a href="javascript:void(0)" title="Agent Login" (click)="ObjectClick($event)">AgentLogin</a></p>
                  <p><a href="javascript:void(0)" title="Dn" (click)="ObjectClick($event)">Dn</a></p>
                </div> -->
                </div>
              </mat-expansion-panel>
              <mat-expansion-panel class="item-expand" *ngIf="config.isRoutingactive">
                <mat-expansion-panel-header class="sidenavHead">
                  <mat-panel-title>
                    <!-- <i class="fas fa-route clry mr"></i> -->
                    Routing
                  </mat-panel-title>
                </mat-expansion-panel-header>

                <p>
                  <a href="javascript:void(0)" title="Scripts" (click)="ObjectClick($event, true)">Scripts</a>
                </p>
                <p>
                  <a href="javascript:void(0)" title="Transaction" (click)="ObjectClick($event)">Transaction</a>
                </p>
                <p>
                  <a href="javascript:void(0)" title="Orchestration" (click)="ObjectClick($event)">Orchestration</a>
                </p>
                <p>
                  <a href="javascript:void(0)" title="Routing Script" (click)="ObjectClick($event)">RoutingScript</a>
                </p>
                <p>
                  <a href="javascript:void(0)" title="Business Attribute"
                    (click)="ObjectClick($event)">BusinessAttribute</a>
                </p>

                <p>
                  <a href="javascript:void(0)" title="Codes" (click)="ObjectClick($event)">Codes</a>
                </p>
                <p>
                  <a href="javascript:void(0)" title="InteractionQueue"
                    (click)="ObjectClick($event)">InteractionQueue</a>
                </p>
                <p>
                  <a href="javascript:void(0)" title="Objectivetable" (click)="ObjectClick($event)">Objectivetable</a>
                </p>

                <p>
                  <a href="javascript:void(0)" title="Solutions" (click)="ObjectClick($event)">Solutions</a>
                </p>
                <p>
                  <a href="javascript:void(0)" title="Time Zone" (click)="ObjectClick($event)">TimeZone</a>
                </p>
                <p>
                  <a href="javascript:void(0)" title="Statistical Days"
                    (click)="ObjectClick($event)">StatisticalDays</a>
                </p>
                <p>
                  <a href="javascript:void(0)" title="Statistical Table"
                    (click)="ObjectClick($event)">StatisticalTable</a>
                </p>
              </mat-expansion-panel>
              <mat-expansion-panel class="item-expand" *ngIf="config.isAccountingActive">
                <mat-expansion-panel-header class="sidenavHead">
                  <mat-panel-title>
                    <!-- <i class="fas fa-calculator clry mr"></i> -->
                    Accounting
                  </mat-panel-title>
                </mat-expansion-panel-header>
                <p>
                  <a href="javascript:void(0)" title="Skills" (click)="ObjectClick($event)">Skills</a>
                </p>
                <p>
                  <a href="javascript:void(0)" title="Users" (click)="ObjectClick($event)">Users</a>
                </p>
                <p>
                  <a href="javascript:void(0)" title="Access Group" (click)="ObjectClick($event)">AccessGroup</a>
                </p>
                <p>
                  <a href="Javascript:void(0)" title="Agent Grounp" (click)="ObjectClick($event)">AgentGroup</a>
                </p>
                <p>
                  <a href="javascript:void(0)" title="Roles" (click)="ObjectClick($event)">Roles</a>
                </p>
              </mat-expansion-panel>
              <mat-expansion-panel class="item-expand" *ngIf="config.isOutboundActive">
                <mat-expansion-panel-header class="sidenavHead">
                  <mat-panel-title>
                    <!-- <i class="fas fa-outdent clry mr"></i>  -->
                    Outbound
                  </mat-panel-title>
                </mat-expansion-panel-header>
                <p (click)="campaignClick('campaign')">
                  <a href="javascript:void(0)" (click)="
									isCollapsedCampaign = !isCollapsedCampaign
								" [attr.aria-expanded]="!isCollapsedCampaign" aria-controls="collapseExampleCampaign">
                    Campaign
                    <i *ngIf="isCollapsedCampaign" class="fas colapseic fa-chevron-down swdicon"></i>
                    <i *ngIf="!isCollapsedCampaign" class="fas colapseic fa-chevron-up swdicon"></i>
                  </a>
                </p>
                <div id="collapseExampleCampaign" [ngbCollapse]="isCollapsedCampaign" class="switch-tree">
                  <app-campaign *ngFor="let val of campaignValue" [campaign]="val" (campaignGroupClick)="
									campaignGroupClick($event)
								"></app-campaign>
                </div>
                <p>
                  <a href="javascript:void(0)" title="Calling List" (click)="ObjectClick($event)">CallingList</a>
                </p>
                <p>
                  <a href="javascript:void(0)" title="Calling List Advanced"
                    (click)="ObjectClick($event)">CallingListAdvanced</a>
                </p>
                <p>
                  <a href="javascript:void(0)" title="Table Access" (click)="ObjectClick($event)">TableAccess</a>
                </p>
                <p>
                  <a href="javascript:void(0)" title="Formats" (click)="ObjectClick($event)">Formats</a>
                </p>
                <p>
                  <a href="javascript:void(0)" title="Fields" (click)="ObjectClick($event)">Fields</a>
                </p>
                <p>
                  <a href="javascript:void(0)" title="Filter" (click)="ObjectClick($event)">Filter</a>
                </p>
                <p>
                  <a href="javascript:void(0)" title="Request Log" (click)="ObjectClick($event)">RequestLog</a>
                </p>
                <p>
                  <a href="javascript:void(0)" title="Call List" (click)="ObjectClick($event)">CallList</a>
                </p>
                <p>
                  <a href="javascript:void(0)" title="Dialogic Board" (click)="ObjectClick($event)">DialogicBoard</a>
                </p>
                <p>
                  <a href="javascript:void(0)" title="Schedules" (click)="ObjectClick($event)">Schedules</a>
                </p>
              </mat-expansion-panel>


              <!-- <mat-expansion-panel class="item-expand">
						<mat-expansion-panel-header class="sidenavHead">
							<mat-panel-title>
								Comparison
							</mat-panel-title>
						</mat-expansion-panel-header>
						<p>
							<a
								href="javascript:void(0)"
								title="Audit History"
								(click)="ComparisonENV()"
								>OneTrack Comparison</a
							>
						</p>
					</mat-expansion-panel> -->
            </mat-accordion>
          </div>
        </div>
      </div>
    </div>
    <div class="main-body">
      <div class="titlebar">
        <app-header-dark></app-header-dark>
      </div>
      <!-- aside end -->
      <div class="mwa-body clearfix pfx-4" *ngIf="activePage">
        <router-outlet></router-outlet>
      </div>
      <div class="mwa-body clearfix fpx-4" *ngIf="activePage === 'oneconnect'">
        <ng-container *ngIf="!showApplicationDeployment">
          <div *ngIf="!getSelectedHosts() || getSelectedHosts().length === 0">
            <div class="hst_card">
              <p class="no-hosts-selected">No environments selected</p>
            </div>
          </div>
          <div *ngIf="getSelectedHosts() && getSelectedHosts().length > 0">
            <div class="hst_card">
              <div class="scrollable">
                <ul id="oc-copy-app-area" class="mwa-env-list">
                  <li class="place-it-here" *ngFor="
												let host of visiblefilterHostsList;
												let i = index
											" (dragover)="onDragOverHost($event)" (dragleave)="onDragOverHostLeave($event)"
                    [attr.data-target-environment]="host.hostId" [attr.data-target-environment-name]="host.hostName"
                    [class.active]=" host.hostId === active_hostId">
                    <div class="env-label" (click)="getHostApplications(host.hostId)">
                      {{ host.hostName }}
                    </div>
                    <div class="env-actions">
                      <!-- <a title="Host configuration" href="#"><i class="fas fa-cog"></i></a> -->
                      <div class="icon" (click)="editHostDialog(host.hostId)">
                        <!-- <img src="/assets/icons/edit_success.svg" class="def" *ngIf="host && host?.installed"> -->
                        <!-- <img src="/assets/icons/edit_danger.svg" class="def" *ngIf="host && !host.installed"> -->
                        <img src="/assets/icons/edit_dark.svg" class="def">
                        <img src="/assets/icons/edit_light.svg" class="hover">
                      </div>
                      <div class="icon" (click)="deleteHost(host.hostId)">
                        <img src="/assets/icons/del_icon.svg" class="def">
                        <img src="/assets/icons/del-white_icon.svg" class="hover">
                      </div>
                    </div>
                  </li>
                </ul>
              </div>
              <div class="scrollable">
                <ng-container *ngIf="
										existingApps && existingApps.length > 0;
											else no_data
										">
                  <ul class="env-app-list" [attr.data-target-environment]="active_hostId">
                    <li class="item" *ngFor="let item of existingApps" (click)="onAppSelected(item)"
                      [class.red]="item?.config?.state === 'CFGDisabled'">

                      <div class="col-sm-12 draggable-app" [ngClass]="{'dragged':item.isNewApp,'saved':newDeployableApps.indexOf(item.appId)!=-1,
											'success':item.status==2,'error':item.status==3}" id="{{ item.appId }}">
                        <mat-accordion>
                          <mat-expansion-panel (opened)="item.selected = true;"
                            (closed)="item.selected = false;item.isUpgrade=false">
                            <mat-expansion-panel-header class="cursor-move">
                              <div class="env-details-header" [class.new]="item.isNewApp">
                                <div class="env-label host-app-contents" draggable="true" (drop)="drop($event)"
                                  (dragstart)="dragApp($event, item)" (dragend)="dragAppEnd($event)"
                                  id="{{ item.appId }}">
                                  {{ item.appName }}
                                </div>

                                <div class="env-actions">
                                  <!-- <a href="javascript:void(0)"><i class="fas fa-info-circle"></i></a>
                                    <a href="javascript:void(0)"><i class="fas fa-cog"></i></a> -->
                                  <div title="Delete application" class="icon"
                                    (click)="deleteAppById(item.appId,$event)">
                                    <img src="/assets/icons/del_icon.svg" class="def">
                                    <img src="/assets/icons/del-white_icon.svg" class="hover">
                                  </div>
                                  <div title="Disable application" class="icon"
                                    (click)="disableAppById(item.appId,item.status,$event)">
                                    <img src="/assets/icons/disable-dark.svg" class="def">
                                    <img src="/assets/icons/disable-white.svg" class="hover">
                                  </div>
                                  <div title="Upgrade application" class="icon" (click)="openAppById(item,$event)">
                                    <img src="/assets/icons/upgrade-dark.svg" class="def">
                                    <img src="/assets/icons/upgrade-white.svg" class="hover">
                                  </div>
                                </div>
                              </div>
                            </mat-expansion-panel-header>

                            <app-host-app-details *ngIf="!item.isNewApp" [appId]="item.appId" [appName]="item.appName"
                              [shouldShow]="item.selected" [dontShowFlag]="false" [isUpgrade]="item.isUpgrade">

                            </app-host-app-details>
                            <div *ngIf="item.isNewApp" class="py-4">No data available at this moment.</div>
                          </mat-expansion-panel>
                        </mat-accordion>
                      </div>
                    </li>
                  </ul>
                </ng-container>
                <ng-template #no_data>
                  <ul class="hst-app_lst no_data">
                    <li>
                      No data or select host from list
                    </li>
                  </ul>
                </ng-template>
              </div>
            </div>
          </div>
          <div class="footer" *ngIf="getSelectedHosts() && getSelectedHosts().length">
            <div class="wrapper">
              <button nz-button class="btn-deploy mwa-btn secondary sh" nzShape="round" nzSize="large" nzType="primary"
                (click)="deployApplications()">
                Deploy
              </button>
              <button nz-button nzShape="round" class="btn-save mwa-btn primary sh" nzType="primary" nzSize="large"
                (click)="saveAllNewApps()" [disabled]="!newApps || newApps.length === 0"
                *ngIf="newApps && newApps.length">
                Save
              </button>
            </div>
          </div>
        </ng-container>
        <ng-container *ngIf="showApplicationDeployment">

          <div class="w-100 pt-3">
            <div class="hst_card">
              <div>
                <mat-checkbox class="example-margin all-checkbox col-md-10" [(ngModel)]="deploySelectAll" (change)="onDeploySelectAll()">
                  Select All</mat-checkbox>
                  <a class="col-md-1 refresh-all" title="Refresh" href="javascript:void(0)" (click)="refereshList()"><i class="fas fa-sync-alt"></i></a>
              </div>
              <div>
                <mat-checkbox class="example-margin" [(ngModel)]="showUndeployed" (change)="onDeployTypeChange()">
                  Show
                  Undeployed</mat-checkbox>
              </div>
            </div>
            <div class="row">
              <div class=" col-md-6 col-lg-6 px-3 pr-md-4 scrollable">
                <ng-container *ngIf="
											applicationsToDeploy && applicationsToDeploy.length > 0;
												else no_data
											">

                  <ul class="hst-app_lst" [attr.data-target-environment]="active_hostId">
                    <li class="row" [ngClass]="{'deployed-app':item.deployed}"
                      *ngFor="let item of applicationsToDeploy">
                      <div class="col-md-1 mr-2">
                        <mat-checkbox [disabled]="item.deployed" class="example-margin white-color"
                          [(ngModel)]="item.checked" (change)="onDeployItemChange()"></mat-checkbox>
                      </div>
                      <div class="host-app-content col-7 col-md-8 col-xl-9">
                        {{ item.appName }}
                      </div>
                      <div class="col-md-1 mr-2">
                        <span *ngIf="item.deployed else errorImage">
                          <img src="/assets/icons/edit_success.svg" class="def">
                        </span>
                        <ng-template #errorImage>
                          <img src="/assets/icons/edit_danger.svg" class="def">
                        </ng-template>
                      </div>
                    </li>
                  </ul>
                </ng-container>
                <ng-template #no_data>
                  <ul class="hst-app_lst no_data">
                    <li>
                      No data or select host from list
                    </li>
                  </ul>
                </ng-template>
              </div>
            </div>
          </div>
          <div class="footer">
            <div class="wrapper"><button nz-button class="mwa-btn primary sh ml-3" nzShape="round" nzSize="large"
                nzType="primary" (click)="startDeployment()" [disabled]="isDeployInProgress">
                Deploy
                <i *ngIf="isDeployInProgress" class="fa fa-spinner fa-spin"></i>
              </button>
              <button nz-button class="btn-deploy mwa-btn secondary sh" nzShape="round" nzSize="large" nzType="primary"
                (click)="cancelDeploy()">
                Cancel
              </button>
            </div>
          </div>
        </ng-container>

        <ng-container *ngIf="visible.showEnvHosts">
          <div>
            <button mat-raised-button color="primary" class="pull-right" (click)="createNewEnvHostDialog()">Add New
              Host</button>
            <button mat-raised-button color="primary" class="pull-right mr-2" (click)="deployEnv()">
              Deploy Environment</button>
            <button mat-raised-button color="primary" class="pull-right mr-2" (click)="deployConfigServer()">
              Deploy Config Server</button>
            <button mat-raised-button color="primary" class="pull-right mr-2" (click)="redeployApps()">
              Redeploy Apps</button>



          </div>
          <div *ngIf="envHosts && envHosts.length" class="w-100 px-3 px-lg-4 mt-4">
            <div class="hst_card">
              <div class="row">
                <div class="col-12 scrollable col-md-4 col-xl-3 px-3 pr-md-2">
                  <ul class="hst_lst">
                    <li *ngFor="
													let host of envHosts;
													let i = index
												" [attr.data-target-environment]="host.id" [attr.data-target-environment-name]="host.hostName" [class]="
													(host.id === selectedEnvHost.id
														? 'd-flex w-100 active'
														: 'd-flex w-100')
												">
                      <div class="w-75">
                        <a href="javascript:void(0)" (click)="
															setSelectedEnvHost(
																host
															)
														" [title]="host.hostName">
                          {{ host.hostName }}
                        </a>
                      </div>
                      <div class="w-25">
                        <a href="javascript:;" class="mr-1" title="Add application"
                          (click)="addHostApplication(host.id)"><i class="fas fa-plus"></i></a>
                        <a href="javascript:;" (click)="editEnvHostDialog(host)" class="mr-1" title="Edit application">
                          <i class="fas fa-edit"></i></a>
                        <!-- <a href="#" class="mr-1" title="Manage application"><i class="fas fa-cog"></i></a> -->
                        <a href="javascript:;" title="Delete application" (click)="delHost(host)"><i
                            class="fas fa-trash-alt"></i></a>
                        <!-- ///////// -->
                      </div>
                    </li>
                  </ul>
                </div>
                <div class="col-12 col-md-8 col-lg-8 px-3 pr-md-4 scrollable offset-lg-1">
                  <ng-container *ngIf="
												visible.showEnvHosts && selectedEnvHost && selectedEnvHost.appDetails.length > 0
												;
												else no_data
											">
                    <ul class="hst-app_lst" [attr.data-target-environment]="active_hostId"
                      *ngIf="selectedEnvHost.cfgServId > 0">
                      <li class="row" *ngFor="let item of selectedEnvHost.appDetails" (click)="onAppSelected(item)"
                        [ngClass]="{'strip-left':item.created === true,'strip-left-red':item.created === false}">

                        <div class="col-sm-12">
                          <mat-accordion>
                            <mat-expansion-panel (opened)="item.selected = true" (closed)="item.selected = false"
                              [class.isNewApp]="item.isNewApp">
                              <mat-expansion-panel-header>
                                <div class="host-app-content col-sm-9 col-md-10">
                                  <h3 class="host-app-title">
                                    {{ item.appName }}
                                    <!-- {{item|json}} -->
                                  </h3>
                                </div>

                                <div class="col-sm-3 col-md-2">
                                  <div class="right-links2">
                                    <!-- <a title="Delete application"
																			href="javascript:;"
																			(click)="deleteAppById(item.appConfig.appId,$event)"><i
																				class="fas fa-trash-alt"></i></a> -->

                                    <a title="Delete application" href="javascript:;"
                                      (click)="delVirApp(item,$event)"><i class="fas fa-trash-alt"></i></a>


                                    <!-- <a title="Upgrade application"
																			href="javascript:;"
																			(click)="openAppById(item.appConfig.appId,$event)"><i
																				class="fas fa-tools"></i></a> -->
                                    <a title="Installed" href="javascript:;" *ngIf="item.installed == true"><i
                                        class="fa fa-info" style="color: #10ef39; font-size: 18px;"></i></a>
                                    <a title="Uninstalled" href="javascript:;" *ngIf="item.installed == false"><i
                                        class="fa fa-info" style="color: red; font-size: 18px;"></i></a>
                                  </div>
                                </div>
                              </mat-expansion-panel-header>
                              <!-- <app-host-app-details *ngIf="!item.isNewApp"
																[appId]="item.appConfig.appId"
																[appConfig]="item.appConfig" [appName]="item.appName"
																[shouldShow]="item.selected" [isVirtual]="true" [id]="item.id" 
																[hostId]="item.hostId">
															</app-host-app-details> -->

                              <app-host-app-details *ngIf="!item.isNewApp" [appId]="item.appConfig.appId"
                                [appConfig]="item.appConfig" [appName]="item.appName" [shouldShow]="item.selected"
                                [isVirtual]="true" [id]="item.id" [hostId]="item.hostId" [dontShowFlag]="true">
                              </app-host-app-details>
                            </mat-expansion-panel>
                          </mat-accordion>
                        </div>
                      </li>
                    </ul>

                    <ul class="hst-app_lst" [attr.data-target-environment]="active_hostId"
                      *ngIf="selectedEnvHost.cpyId > 0">
                      <li class="row" *ngFor="let item of selectedEnvHost.appDetails" (click)="onAppSelected(item)"
                        [ngClass]="{'strip-left':item.created === true,'strip-left-red':item.created === false}">

                        <div class="col-sm-12">
                          <mat-accordion>
                            <mat-expansion-panel (opened)="item.selected = true" (closed)="item.selected = false"
                              [class.isNewApp]="item.isNewApp">
                              <mat-expansion-panel-header>
                                <div class="host-app-content col-sm-9 col-md-10">
                                  <h3 class="host-app-title">
                                    {{ item.appName }}
                                    <!-- {{item|json}} -->
                                  </h3>
                                </div>

                                <div class="col-sm-3 col-md-2">
                                  <div class="right-links2">
                                    <!-- <a title="Delete application"
																			href="javascript:;"
																			(click)="deleteAppById(item.appConfig.appId,$event)"><i
																				class="fas fa-trash-alt"></i></a> -->

                                    <a title="Delete application" href="javascript:;"
                                      (click)="deleteAppById(item,$event)"><i class="fas fa-trash-alt"></i></a>


                                    <!-- <a title="Upgrade application"
																			href="javascript:;"
																			(click)="openAppById(item.appConfig.appId,$event)"><i
																				class="fas fa-tools"></i></a> -->
                                    <a title="Installed" href="javascript:;" *ngIf="item.installed == true"><i
                                        class="fa fa-info" style="color: #10ef39; font-size: 18px;"></i></a>
                                    <a title="Uninstalled" href="javascript:;" *ngIf="item.installed == false"><i
                                        class="fa fa-info" style="color: red; font-size: 18px;"></i></a>
                                  </div>
                                </div>
                              </mat-expansion-panel-header>
                              <!-- <app-host-app-details *ngIf="!item.isNewApp"
																[appId]="item.appConfig.appId"
																[appConfig]="item.appConfig" [appName]="item.appName"
																[shouldShow]="item.selected" [isVirtual]="true" [id]="item.id" 
																[hostId]="item.hostId">
															</app-host-app-details> -->

                              <app-host-app-details *ngIf="!item.isNewApp" [appId]="item.appConfig.appId"
                                [appConfig]="item.appConfig" [appName]="item.appName" [shouldShow]="item.selected"
                                [isVirtual]="true" [id]="item.id" [hostId]="item.hostId" [dontShowFlag]="true">
                              </app-host-app-details>
                            </mat-expansion-panel>
                          </mat-accordion>
                        </div>
                      </li>
                    </ul>

                  </ng-container>
                  <ng-template #no_data>
                    <ul class="hst-app_lst no_data">
                      <li>
                        No data or select host from list
                      </li>
                    </ul>
                  </ng-template>
                </div>
              </div>
            </div>
          </div>
        </ng-container>

      </div>
      <!-- main end -->
      <app-application-details (applicationDetailCallback)="ObjectClick($event)"></app-application-details>

      <!--Modal Code-->

      <div id="myModal" class="modal fade" role="dialog">
        <div class="modal-dialog modal-lg app-addcon-modal">
          <!-- Modal content-->
          <div class="modal-content">
            <div class="modal-header" style="display: block !important">
              <button type="button" class="close" data-dismiss="modal">
                &times;
              </button>
              <h4 class="modal-title">Select Your Apps</h4>
            </div>
            <div class="modal-body">
              <ul class="list-group">
                <li class="list-group-item" *ngFor="
										let app of selectedApps;
										let i = index
									">
                  {{ app.appName }}
                  <span>
                    <!-- <input type="checkbox" style="margin-left: 10px" (click)="
											chooseSelectedApps(
												$event,
												ChooseDropApps,
												i
											)
										" [value]="app.appName" /> -->

                  </span>
                </li>
              </ul>
            </div>
            <div class="modal-footer">
              <!-- <button type="button" class="btn btn-primary" (click)="showApps()"> -->
              <button type="button" class="btn btn-primary">
                Submit
              </button>
              <button type="button" class="btn btn-default" data-dismiss="modal">
                Close
              </button>
            </div>
          </div>
        </div>
      </div>


    </div>
    <!-- footer end -->
    <!-- content wrapper -->
  </div>
  <!-- wrapper end -->
</div>
<!-- page container end -->